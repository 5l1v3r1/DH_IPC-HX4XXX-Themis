define(function(require){var a=require("jsCore/rpc"),b=Page.ptzConfigSD={Tab:[],init:function(){b.protoList=null,b.Tab.network.init(),b.Tab.sdnetwork.init(),b.Tab.analog.init(),b.translate(),b.bind(),b.render()},translate:function(){$("page_ptzConfigSD").translation()},render:function(){!isEnable("is_show_help")&&$("ptz_helpIcon").setStyle("display","none"),b._showPtzType(),a.PTZ.getProtocol().done(function(a){b.protoList=a.RS}).always(function(){$$(".ptz_tab_title.ui-tab-current").fireEvent("click")})},bind:function(){$$(".ptz_tab_title").addEvent("click",b._onTabTitleClick),$("ptz_helpIcon").addEvent("click",function(){openHelp("ptzConfig.htm")})},_onTabTitleClick:function(){var a=this.getProperty("data-for");$$(".ptz_tab_title").removeClass("ui-tab-current"),$$(".ptz_tabs").setStyle("display","none"),this.addClass("ui-tab-current"),$("ptz_tab_"+a).setStyle("display","block"),b.Tab[a].render()},_showPtzType:function(){if(ability.get("PTZCaps",!0).done(function(a){$("ptz_tab_title_analog").setStyle("display",a&&a.PtzDevice?"":"none")}),$("ptz_tab_title_sdnetwork").style.display="none",$("ptz_tab_title_network").style.display="",$("ptz_tab_title_network").addClass("ui-tab-current"),-1!==webApp.DeviceType.indexOf("SD"))switch(webCaps.DeviceSubClass){case"SD_CA":case"SD_CA_ICT":$("ptz_tab_title_network").set("text",tl("w_netPtzSetting"));break;case"SDC":case"SD_PTZ":default:$("ptz_tab_title_sdnetwork").style.display="",$("ptz_tab_title_network").style.display="none",$$(".ptz_tab_title").removeClass("ui-tab-current"),$("ptz_tab_title_sdnetwork").addClass("ui-tab-current")}}};!function(){var b,c,d=Page.ptzConfigSD.Tab.sdnetwork={init:function(){d.translate(),d.bind()},translate:function(){},render:function(){a.ConfigManager.getConfig("Ptz").done(function(a){b=a,c=$unlink(b),d._renderElements(c)})},bind:function(){$("ptz_tab_sdnetwork_confirm").addEvent("click",d._bindSDNetworkConfirm),$("ptz_tab_sdnetwork_refresh").addEvent("click",d._bindSDNetworkFresh),$("ptz_tab_sdnetwork_default").addEvent("click",d._bindSDNetworkDefault)},_renderElements:function(a){var b=a[0];if($("ptz_tab_sdnetwork_protocol").empty(),Page.ptzConfigSD.protoList){Page.ptzConfigSD.protoList.each(function(a){$("ptz_tab_sdnetwork_protocol").options.add(new Option(tl(a),a))});var c=Page.ptzConfigSD.protoList.indexOf(b.ProtocolName);$("ptz_tab_sdnetwork_protocol").selectedIndex=0>c?0:c}else $("ptz_tab_sdnetwork_protocol").options.add(new Option(tl(b.ProtocolName),b.ProtocolName)),$("ptz_tab_sdnetwork_protocol").disabled=!0},_bindSDNetworkConfirm:function(){var d=c[0];d.ProtocolName=$("ptz_tab_sdnetwork_protocol").value,a.ConfigManager.setConfig("Ptz",c).done(function(){b=$unlink(c),remarkDisplay("ptz_tab_sdnetwork_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_sdnetwork_remark",tl("Saving failure"),3e3,1)})},_bindSDNetworkFresh:function(){a.ConfigManager.getConfig("Ptz").done(function(a){b=a,c=$unlink(b),d._renderElements(c),remarkDisplay("ptz_tab_sdnetwork_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_sdnetwork_remark",tl("Operateingfailure"),3e3,1)})},_bindSDNetworkDefault:function(){a.ConfigManager.getDefault("Ptz").done(function(a){d._renderElements(a),remarkDisplay("ptz_tab_sdnetwork_remark",tl("Defaultsuccess"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_sdnetwork_remark",tl("Defaultfailure"),3e3,1)})}}}(),function(){var b,c,d=Page.ptzConfigSD.Tab.network={init:function(){d.translate(),d.bind()},translate:function(){},render:function(){a.ConfigManager.getConfig("Ptz").done(function(a){b=a,c=$unlink(b),d._renderElements(c)})},bind:function(){attachLimit("ptz_tab_network_address",0,255),$("ptz_tab_network_confirm").addEvent("click",d._bindNetworkConfirm),$("ptz_tab_network_refresh").addEvent("click",d._bindNetworkFresh),$("ptz_tab_network_default").addEvent("click",d._bindNetworkDefault)},_renderElements:function(a){var b=a[0];if($("ptz_tab_network_protocol").empty(),Page.ptzConfigSD.protoList){Page.ptzConfigSD.protoList.each(function(a){$("ptz_tab_network_protocol").options.add(new Option(tl(a),a))});var c=Page.ptzConfigSD.protoList.indexOf(b.ProtocolName);$("ptz_tab_network_protocol").selectedIndex=0>c?0:c}else $("ptz_tab_network_protocol").options.add(new Option(tl(b.ProtocolName),b.ProtocolName)),$("ptz_tab_network_protocol").disabled=!0;$("ptz_tab_network_address").value=b.Address,$("ptz_tab_network_baudrate").value=b.Attribute[0],$("ptz_tab_network_databit").value=b.Attribute[1],$("ptz_tab_network_stopbit").value=b.Attribute[3],$("ptz_tab_network_parity").value=b.Attribute[2]},_bindNetworkConfirm:function(){var d=c[0];d.ProtocolName=$("ptz_tab_network_protocol").value,d.Attribute[0]=$("ptz_tab_network_baudrate").value-0,d.Attribute[1]=$("ptz_tab_network_databit").value-0,d.Attribute[2]=$("ptz_tab_network_parity").value,d.Attribute[3]=$("ptz_tab_network_stopbit").value,d.Address=$("ptz_tab_network_address").value-0,a.ConfigManager.setConfig("Ptz",c).done(function(){b=$unlink(c),remarkDisplay("ptz_tab_network_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_network_remark",tl("Saving failure"),3e3,1)})},_bindNetworkFresh:function(){a.ConfigManager.getConfig("Ptz").done(function(a){b=a,c=$unlink(b),d._renderElements(c),remarkDisplay("ptz_tab_network_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_network_remark",tl("Operateingfailure"),3e3,1)})},_bindNetworkDefault:function(){a.ConfigManager.getDefault("Ptz").done(function(a){d._renderElements(a),remarkDisplay("ptz_tab_network_remark",tl("Defaultsuccess"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_network_remark",tl("Defaultfailure"),3e3,1)})}}}(),function(){var b,c,d=Page.ptzConfigSD.Tab.analog={init:function(){d.translate(),d.bind()},translate:function(){},render:function(){a.ConfigManager.getConfig("PtzDevice").done(function(a){b=a,c=$unlink(b),d._renderElementsDevice(c)})},bind:function(){$("ptz_tab_analog_confirm").addEvent("click",d._bindAnalogConfirm),$("ptz_tab_analog_refresh").addEvent("click",d._bindAnalogFresh),$("ptz_tab_analog_default").addEvent("click",d._bindAnalogDefault),attachLimit("ptz_tab_analog_address",0,255)},_renderElementsDevice:function(a){var b=a;$("ptz_tab_analog_address").value=b.Address,$("ptz_tab_analog_baudrate").value=b.Attribute[0],$("ptz_tab_analog_databit").value=b.Attribute[1],$("ptz_tab_analog_stopbit").value=b.Attribute[3],$("ptz_tab_analog_parity").value=b.Attribute[2]},_bindAnalogConfirm:function(){var d=c;d.Attribute[0]=$("ptz_tab_analog_baudrate").value-0,d.Attribute[1]=$("ptz_tab_analog_databit").value-0,d.Attribute[2]=$("ptz_tab_analog_parity").value,d.Attribute[3]=$("ptz_tab_analog_stopbit").value,d.Address=$("ptz_tab_analog_address").value-0,a.ConfigManager.setConfig("PtzDevice",c).done(function(){b=$unlink(c),remarkDisplay("ptz_tab_analog_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_analog_remark",tl("Saving failure"),3e3,1)})},_bindAnalogFresh:function(){a.ConfigManager.getConfig("PtzDevice").done(function(a){b=a,c=$unlink(b),d._renderElementsDevice(c),remarkDisplay("ptz_tab_analog_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_analog_remark",tl("Operateingfailure"),3e3,1)})},_bindAnalogDefault:function(){a.ConfigManager.getDefault("PtzDevice").done(function(a){d._renderElementsDevice(a),remarkDisplay("ptz_tab_analog_remark",tl("Defaultsuccess"),3e3,0)}).fail(function(){remarkDisplay("ptz_tab_analog_remark",tl("Defaultfailure"),3e3,1)})}}}()});