!function(a){define(function(require){var b=require("jsCore/rpc"),c=require("jsCore/ability"),d=require("jsCore/plugin"),e=require("jsCore/rpcLogin");require("jsCore/modules/timeDrag"),require("jsCore/modules/zoomFocus"),function(){var b=Page.cameraConfig={Tab:[],current:null,init:function(){d.CheckFuncSupport(2).done(function(b){b?a("#camera_showFullScene").show():a("#camera_showFullScene").hide()}),b.Tab.Conditions.init(),b.Tab.config.init(),a.when(c.get("VideoInputCapsEx"),c.get("VideoInputCaps")).done(function(c,d){if((c&&c.ABFFunction.Support||d&&(d.ElectricFocus||d.SyncFocus))&&e.chkAuthority("VideoInputConfig")&&e.chkAuthority("Monitor_01")){a("#camera_autoFocus_label").show();var f="w_zoomFocus";c&&c.ABFFunction.Support?(f="W_focus",a("#camera_ABF").hide(),a("#camera_restoryAll")[0]&&(a("#camera_restoryAll").remove(),a("#camera_ABFRestartAll").html('<a href="javascript:;" class="ui-button" id="camera_restoryAll" t="w_restoryAll">'+tl("w_restoryAll")+"</a>")),a("#camera_nearText").hide(),a("#camera_farText").hide(),a("#camera_focusText").hide()):d&&d.SyncFocus&&(a("#camera_syncFocus").hide(),f="W_focus",a("#camera_restartAll")[0]&&(a("#camera_restartAll").remove(),a("#camera_syncFocusRestartAll").html('<a href="javascript:;" class="ui-button" id="camera_restartAll" t="w_Refresh">'+tl("w_Refresh")+"</a>"),a("#camera_teleText").hide(),a("#camera_wideText").hide(),a("#camera_zoomText").hide())),b.Tab.autoFocus.init(),a("#camera_autoFocus_label").text(tl(f))}a("#page_cameraConfig").translation(),b.bind(),b.render()})},translate:function(){},render:function(){!isEnable("is_show_help")&&a("#camera_help").hide(),a(".camera_tab_title.ui-tab-current").click()},leave:function(){d.close(),b.current&&b.current.leave&&b.current.leave(),b.current=null},bind:function(){a(".camera_tab_title").on("click",b._onTabTitleClick),a("#camera_help").on("click",function(){openHelp("cameraConfig.htm")})},_onTabTitleClick:function(){var c=this.getProperty("data-for"),d=this;b.current&&b.current!==b.Tab[c]&&b.current.leave&&b.current.leave(),setTimeout(function(){a(".camera_tab_title").removeClass("ui-tab-current"),a(".camera_tab_con").hide(),a(d).addClass("ui-tab-current"),a("#camera_tab_"+c).show(),b.current=b.Tab[c],b.Tab[c].render()},20)}}}(),function(){var e=[],f=[],g=null,h=null,j=null,k=null,l=null,m=null,n=null,o=null,p=!1,q=["1/50","1/100","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/25","1/12","1/6","1/3","1/10","1/5","1/4"],r=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],s=[20,10,4,2,1,.5,.25,.1,40,83.33,166.67,300,100,200,250],t=["1/60","1/120","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/30","1/15","1/8","1/4","1/12","1/6"],u=[1,2,3,4,5,6,7,8,9,10,11,12,13,14],v=[16.67,8.33,4,2,1,.5,.25,.1,33.33,66.67,125,250,83.33,166.67],w=["1/50","1/60","1/100","1/120","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/25","1/30","1/12","1/15","1/6","1/8","1/3","1/4","1/10","1/5"],x=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],y=[20,16.67,10,8.33,4,2,1,.5,.25,.1,40,33.33,83.33,66.67,166.67,125,300,250,100,200];webApp.GongAnDetect&&(q.push("1"),r.push(16),s.push(299),w.push("1"),x.push(22),y.push(299));var z=["1/30000","1/10000","1/4000","1/2000","1/1000","1/500","1/250","1/100","1/50","1/25"],A=[.03,.1,.25,.5,1,2,4,10,20,40],B=["1/30000","1/10000","1/4000","1/2000","1/1000","1/500","1/250","1/120","1/60","1/30"],C=[.03,.1,.25,.5,1,2,4,8.33,16.67,33.33],D=0,E=!0,F=!0,G=!1,H=0,I=!1,J=0,K=0,L=0,M=0,N={},O={},P={},Q={},R={},S={},T={},U={},V={},W=0,X=0,Y=0,Z=0,$=0,_=0,ab=0,bb=0,cb=0,db=0,eb={},fb=null,gb=!0,hb={},ib={},jb=!1,kb=0,lb=0,mb={},nb=0,ob=!1,pb={},qb=Page.cameraConfig.Tab.Conditions={init:function(){qb._sliderInit(),qb.translate(),qb.bind(),qb.capsDefer=qb._getVideoInCaps()},translate:function(){},leave:function(){d.addEvent("RegionChanged",null),d.SetRegionNum(0),d.hide()},render:function(){d.cover("#camera_showVideo",function(b){d.SetRegionNum(0),d.SetModuleMode(1),d.open(),b&&setTimeout(function(){a("#camera_refresh").click()},0)}),d.addEvent("RegionChanged",function(a,b,c,d,e){qb._postBacklineCfg(b,c,d,e,2)}),qb.capsDefer.done(function(){qb._initPage(),b.ConfigManager.getConfig(["VideoInOptions","VideoColor","VideoInPreviewOptions","Encode","VideoInDefog"]).done(function(b){if(null!=a("#CAMERA")[0]){if(common.chkMutilCallRet(b)){g=b[0].params.table,j=b[1].params.table,l=b[2].params.table,h=$unlink(g),k=$unlink(j),m=$unlink(l),b[4].result&&(n=b[4].params.table,o=$unlink(n));var c=b[3].params.table;qb._isCanFilp(c)}qb._SliderValueInit(),qb._hideForK6(),qb._showPageInit(),qb._showBackLightInit(),qb._getCurrentPage(),setTimeout(qb._restoreTemporaryConfig,500)}})})},_restoreTemporaryConfig:function(){Site.currentPage.isLogin||(Site.currentPage.is.cameraConfig&&a("#camera_camara_label").hasClass("ui-tab-current")?setTimeout(qb._restoreTemporaryConfig,100):b.ConfigManager.restoreTemporaryConfig(["VideoInOptions","VideoColor","VideoInPreviewOptions","VideoInDefog"]))},_showPageInit:function(){qb._putValue()},_initPage:function(){var b,d=0;if(e[0]){b=e[0],a("#camera_Exposure").html('<input id="camera_ExposureValue1" maxlength=5 type="text" class="ui-input fn-width40"/>                    <span class="ui-symbol">~</span> <input id="camera_ExposureValue2" maxlength=5 type="text" class="ui-input fn-width40"/>                    <span class="ui-text fn-marr0">ms(0</span><span class="ui-symbol fn-marr0">~</span><span id="camera_MaxExposureTime" class="ui-text fn-marr0">'+e[0].MaxExposureTime+'</span><span class="ui-text fn-marr0">)</span>'),a("#camera_ExposureValue1").on("blur",function(){qb._chaValue(this,e[0].MaxExposureTime)}),a("camera_ExposureValue2").on("blur",function(){qb._chaValue(this,e[0].MaxExposureTime)}),a("#camera_ExposureSlct").empty(),"PAL"==webApp.VideoStandard?z.each(function(b,c){a("#camera_ExposureSlct")[0].options.add(new Option(b,A[c]))}):B.each(function(b,c){a("#camera_ExposureSlct")[0].options.add(new Option(b,C[c]))}),a("#camera_ExposureSlct")[0].options.add(new Option(tl("w_Custom"),"Custom")),a("#camera_ExposureSlct").on("change",function(){qb._changeExposure()}),-1!==webApp.DeviceType.indexOf("3110")&&("PAL"==webApp.VideoStandard?(w=["1/50","1/100","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/25","1/12","1/6","1/3","1/100000"],x=[1,2,3,4,5,6,7,8,9,10,11,12,13],y=[20,10,4,2,1,.5,.25,.1,40,83.33,166.67,300,.01]):(w=["1/60","1/120","1/250","1/500","1/1000","1/2000","1/4000","1/10000","1/30","1/15","1/8","1/4","1/100000"],x=[1,2,3,4,5,6,7,8,9,10,11,12,13],y=[16.67,8.33,4,2,1,.5,.25,.1,33.33,66.67,125,250,.01]),webApp.GongAnDetect&&"PAL"==webApp.VideoStandard?(w.push("1"),x.push(14),y.push(299)):(w.push("1"),x.push(14),y.push(299))),b.ExposureMode>>3&1||(a("#camera_AntiFlicker_50").hide(),a("#camera_AntiFlicker_50_label").hide()),b.ExposureMode>>4&1||(a("#camera_AntiFlicker_60").hide(),a("#camera_AntiFlicker_60_label").hide()),a("#camera_ExposureMode").empty(),1&b.ExposureMode&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Automatic"),0)),b.ExposureMode>>1&1&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Gainfirst"),1)),b.ExposureMode>>2&1&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_ExposureTime"),2)),b.ExposureMode>>3&1||b.ExposureMode>>4&1?(a("#camera_showAntiFlicker").show(),gb=!0):gb=!1,a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Manual"),4));var g=a("#camera_backlight").empty()[0];g.options.add(new Option(tl("off"),0)),f.VideoInAutoContrast&&f.VideoInAutoContrast.Support&&(ob=!0,g.options.add(new Option(tl("SSA"),6))),b.Backlight&&(g.options.add(new Option(tl("w_Backlight"),1)),1==b.Backlight&&a("#camera_showBacklightMode").hide()),1==b.WideDynamicRange?g.options.add(new Option(tl("WideDynamicRange"),2)):2==b.WideDynamicRange&&g.options.add(new Option(tl("w_realWideDynamic"),4)),b.GlareInhibition&&(-1!==webApp.ProcessInfo.indexOf("A5S")||-1!==webApp.ProcessInfo.indexOf("S2")||1==a("#camera_AntiFlicker_70").prop("checked")&&0==a("#camera_ExposureMode").val())&&g.options.add(new Option(tl("w_GlareInhibition"),3)),a("#camera_DayNightColor").empty(),b.DayNightColor?(a("#camera_DayNightColor")[0].options.add(new Option(tl("Colorful"),0)),a("#camera_DayNightColor")[0].options.add(new Option(tl("Automatic"),1)),a("#camera_DayNightColor")[0].options.add(new Option(tl("BlackWhite"),2)),b.DayNightColorIO&&a("#camera_DayNightColor")[0].options.add(new Option(tl("w_SensorEnter"),4))):a("#camera_DayNightColor").hide(),b.Mirror?a("#camera_showMirror").show():a("#camera_showMirror").hide(),c.is("RotateConflict").done(function(c){b.Flip&&b.Rotate90?a("#camera_flip").html(c?'<select id="camera_select_filp" class="fn-width170"><option value="0">'+tl("w_noFlipEx")+'</option><option value="2">'+tl("w_Flip180Ex")+"</option></select>":'<select id="camera_select_filp" class="fn-width170"><option value="0">'+tl("w_noFlipEx")+'</option><option value="1">'+tl("w_clockwise90Ex")+'</option><option value="2">'+tl("w_Flip180Ex")+'</option><option value="3">'+tl("w_clockwise90Ex2")+"</option></select>"):b.Flip&&0==b.Rotate90?a("#camera_flip").html('<select id="camera_select_filp" class="fn-width170"><option value="0">'+tl("w_noFlipEx")+'</option><option value="2">'+tl("w_Flip180Ex")+"</option></select>"):0==b.Flip&&b.Rotate90?a("#camera_flip").html(c?'<select id="camera_select_filp" class="fn-width170"><option value="0">'+tl("w_noFlipEx")+"</option></select>":'<select id="camera_select_filp" class="fn-width170"><option value="0">'+tl("w_noFlipEx")+'</option><option value="1">'+tl("w_clockwise90Ex")+'</option><option value="3">'+tl("w_clockwise90Ex2")+"</option></select>"):a("#camera_showFlip").hide(),a("#camera_select_filp").on("change",function(){qb._showFilpChange()})}),b.IrisAuto?a("#camera_showAutoIris").show():a("#camera_showAutoIris").hide(),2==b.TridimDenoise||1==b.TridimDenoiseDetails?(jb=!0,a("#camera_3DradioDepressNoise").show()):(jb=!1,a("#camera_3DradioDepressNoise").hide(),a("#camera_3DshowEstimate").hide(),a("#camera_3Dintension").hide());var h=b.WhiteBalance;switch(a("#camera_whiteBalance").empty(),h){case 0:break;case 1:a("#camera_whiteBalance")[0].options.add(new Option(tl("Automatic"),"Auto"));break;case 2:a("#camera_whiteBalance")[0].options.add(new Option(tl("Automatic"),"Auto")),a("#camera_whiteBalance")[0].options.add(new Option(tl("Sunny"),"Sunny")),a("#camera_whiteBalance")[0].options.add(new Option(tl("Night"),"Night")),isEnable("is_show_whiteBalanceOutdoor")&&a("#camera_whiteBalance")[0].options.add(new Option(tl("w_outdoor"),"Outdoor"));break;case 3:p=!0,a("#camera_whiteBalance")[0].options.add(new Option(tl("Automatic"),"Auto")),a("#camera_whiteBalance")[0].options.add(new Option(tl("Sunny"),"Sunny")),a("#camera_whiteBalance")[0].options.add(new Option(tl("Night"),"Night")),isEnable("is_show_whiteBalanceOutdoor")&&a("#camera_whiteBalance")[0].options.add(new Option(tl("w_outdoor"),"Outdoor")),a("#camera_whiteBalance")[0].options.add(new Option(tl("Custom"),"Custom"))}a("#camera_DayNightDelay").empty();for(var d=2;11>d;d++)a("#camera_DayNightDelay")[0].options.add(new Option(d+" "+tl("w_secondEx"),d));a("#camera_remark").hide(),f.ImageStabilization&&f.ImageStabilization.Support&&a("#camera_showVideoStabilization").show(),f.Defog&&f.Defog.Support&&a("#camera_showVideoInDefog").show(),b.SmartIRExposure&&a("#camera_showSmartIR").show()}},_SliderValueInit:function(){var a=g[0],b=j[0][0],c=l[0];W=b.Brightness,X=b.Contrast,Y=b.Saturation,Z=b.Hue,$=c.DayOptions.EEMode,_=a.Gain},_sliderInit:function(){N=null,O=null,P=null,Q=null,R=null,S=null,V=null,T=null,U=null,Slider3Destimate=null,ib=null,pb=null,a("#camera_showGainRange").show(),a("#camera_showRedGain").show(),a("#camera_showBlueGain").show(),a("#camera_showWDRValue").show(),a("#camera_3DshowEstimate").show(),a("#camera_3Dintension").show(),db=1,N=new FineSlider("camera_line_Brightness","camera_icon_Brightness",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_Brightness").attr("title",b),W=b,a("#camera_Brightness_title").text(W)},onComplete:function(){qb._setBrightness()}},"camera_Brightness_title","camera_add_Brightness","camera_less_Brightness"),O=new FineSlider("camera_line_Contrast","camera_icon_Contrast",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_Contrast").attr("title",b),X=b,a("#camera_Contrast_title").text(X)},onComplete:function(){qb._setContrast()}},"camera_Contrast_title","camera_add_Contrast","camera_less_Contrast"),P=new FineSlider("camera_line_Saturation","camera_icon_Saturation",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_Saturation").attr("title",b),Y=b,a("#camera_Saturation_title").text(Y)},onComplete:function(){qb._setSaturation()}},"camera_Saturation_title","camera_add_Saturation","camera_less_Saturation"),Q=new FineSlider("camera_line_Hue","camera_icon_Hue",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_Hue").attr("title",b),Z=b,a("#camera_Hue_title").text(Z)},onComplete:function(){qb._setHue()}},"camera_Hue_title","camera_add_Hue","camera_less_Hue"),R=new FineSlider("camera_line_EEMode","camera_icon_EEMode",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_EEMode").attr("title",b),$=b,a("#camera_EEMode_title").text($)},onComplete:function(){qb._setEEMode()}},"camera_EEMode_title","camera_add_EEMode","camera_less_EEMode"),S=new FineSlider("camera_line_Gain","camera_icon_Gain",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_Gain").attr("title",b),_=b,a("#camera_Gain_title").text(_)},onComplete:function(){a("#camera_Gain_title").text(_),qb._postGainOnly()}},"camera_Gain_title","camera_add_Gain","camera_less_Gain"),V=new FineSlider("camera_line_WDR","camera_icon_WDR",{range:[1,100],wheel:!1,onChange:function(b){a("#camera_line_WDR").attr("title",b),cb=b,a("#camera_WDR_title").text(cb)},onComplete:function(){qb._postBackValue()}},"camera_WDR_title","camera_add_WDR","camera_less_WDR"),T=new FineSlider("camera_line_redGain","camera_icon_redGain",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_redGain").attr("title",b),ab=b,a("#camera_redGain_title").text(ab)},onComplete:function(){0==db&&setTimeout(qb._post,0)}},"camera_redGain_title","camera_add_redGain","camera_less_redGain"),U=new FineSlider("camera_line_blueGain","camera_icon_blueGain",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_blueGain").attr("title",b),bb=b,a("#camera_blueGain_title").text(bb)},onComplete:function(){0==db&&setTimeout(qb._post,0)}},"camera_blueGain_title","camera_add_blueGain","camera_less_blueGain"),hb=new FineSlider("camera_line_3Destimate","camera_icon_3Destimate",{range:[1,100],wheel:!1,onChange:function(b){a("#camera_line_3Destimate").attr("title",b),kb=b,a("#camera_3Destimate_title").text(kb)},onComplete:function(){qb._post()}},"camera_3Destimate_title","camera_add_3Destimate","camera_less_3Destimate"),ib=new FineSlider("camera_line_3Dintension","camear_icon_3Dintension",{range:[1,100],wheel:!1,onChange:function(b){a("#camera_line_3Dintension").attr("title",b),lb=b,a("#camera_3Dintension_title").text(lb)},onComplete:function(){qb._post()}},"camera_3Dintension_title","camera_add_3Dintension","camera_less_3Dintension"),mb=new FineSlider("camera_line_gamma","camera_icon_gamma",{steps:100,wheel:!1,onChange:function(b){a("#camera_line_gamma").attr("title",b),nb=b,a("#camera_gamma_title").text(nb)},onComplete:function(){qb._postGammaValue()}},"camera_gamma_title","camera_add_gamma","camera_less_gamma"),db=0},_postGammaValue:function(){if(1!=db){var a=l[0].DayOptions;1==D?a=l[0].NightOptions:2==D&&(a=l[0].NormalOptions),a.GammaAuto=0,a.GammaMode=nb,a.Snapshot.GammaAuto=0,a.Snapshot.GammaMode=nb,b.ConfigManager.setTemporaryConfig("VideoInPreviewOptions",l).fail(qb._postresult)}},_resetBackMode:function(){var b;if(e[0]){b=e[0];var c=a("#camera_backlight").val(),d=a("#camera_backlight").empty()[0];d.options.add(new Option(tl("off"),0)),ob&&d.options.add(new Option(tl("SSA"),6)),b.Backlight&&d.options.add(new Option(tl("w_Backlight"),1));var f=null;switch(b.WideDynamicRange){case 1:f=new Option(tl("WideDynamicRange"),2);break;case 2:f=new Option(tl("w_realWideDynamic"),4);break;case 3:f=new Option(tl("WideDynamicRange"),5)}f&&d.options.add(f),b.GlareInhibition&&(-1!==webApp.ProcessInfo.indexOf("A5S")||-1!==webApp.ProcessInfo.indexOf("S2")||1==a("#camera_AntiFlicker_70")[0].checked&&0==a("#camera_ExposureMode").val()&&4!=c)&&d.options.add(new Option(tl("w_GlareInhibition"),3))}},_resetGlareInhibition:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions);var c=a("#camera_backlight").val();b.GlareInhibition=3==c?50:0},_checkAntiflicker:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),0==b.AntiFlicker&&a("#camera_AntiFlicker_70")[0].checked||1==b.AntiFlicker&&a("#camera_AntiFlicker_50")[0].checked||2==b.AntiFlicker&&a("#camera_AntiFlicker_60")[0].checked||(qb._setDefaultExposure(),qb._resetExposure(),qb._resetBackMode(),qb._selectBackMode(),qb._resetGlareInhibition(),qb._post())},_hideForK6:function(){isEnable("is_k6_DeviceType")&&(a("#camera_showExposureMode").hide(),a("#camera_showExposure").hide(),a("#camera_showGain").hide(),a("#camera_showAntiFlicker").hide(),a("#camera_showExposureSpeed").hide(),a("#camera_showGainRange").hide(),a("#camera_showBacklight").hide(),a("#camera_showBacklightMode").hide(),a("#camera_showWDR").hide(),a("#camera_showWDRValue").hide())},_showBackLightInit:function(){1==a("#camera_backlight").val()&&a("#camera_backlightCustom")[0].checked?(a("#camera_btn_backlight")[0].className="camera-draw-icon-on",qb._drawBackline(!0),a("#camera_backlightCustom")[0].customChecked=!0):(a("#camera_btn_backlight")[0].className="camera-draw-icon-off",qb._drawBackline(!1),a("#camera_backlightCustom")[0].customChecked=!1)},_speExposureSpeed:function(a,b){var c=isEnable("is_ExposureSpeed");10==c?(a.push("1/30000"),b.push(.03)):1==c?(a.push("1/100000"),b.push(.01)):11==c&&(a.push("1/30000"),b.push(.03),a.push("1/100000"),b.push(.01))},_putValue:function(){var b=g[0],f=j[0][0],h=l[0],k=e[0];eb.start=a.pad(b.NightOptions.SunriseHour,2)+":"+a.pad(b.NightOptions.SunriseMinute,2),eb.end=a.pad(b.NightOptions.SunsetHour,2)+":"+a.pad(b.NightOptions.SunsetMinute,2),D=a("#camera_config_mode").val()-0,0==D?h=l[0].DayOptions:1==D?(b=b.NightOptions,f=j[0][1],h=l[0].NightOptions):(b=b.NormalOptions,f=j[0][2],h=l[0].NormalOptions);var m=e[0].Exposure;if(1==b.AntiFlicker){if(qb._EmpRayDisplay(),b.ExposureSpeed){a("#camera_ExposureMode").val(4),a("#camera_ExposureSpeed").empty();var o=[],p=[];if(0!=b.WideDynamicRange&&2==e[0].WideDynamicRange){var z=q.slice(1,8),A=r.slice(1,8);p=s.slice(1,8),qb._speExposureSpeed(z,p),qb._sortArray(z,A,p);for(var B=0;B<z.length;B++)a("#camera_ExposureSpeed")[0].options.add(new Option(z[B],p[B]))}else{var C=q.slice(0,m-1),E=r.slice(0,m-1);for(o=s.slice(0,m-1),qb._sortArray(C,E,o),qb._filterArray(C,E,1,o),i=0;i<C.length;i++)a("#camera_ExposureSpeed")[0].options.add(new Option(C[i],o[i]))}b.ExposureSpeed=2*m,b.ExposureValue2==b.ExposureValue1&&(o.contains(b.ExposureValue2)||p.contains(b.ExposureValue2))?a("#camera_ExposureSpeed").val(b.ExposureValue2):a("#camera_ExposureSpeed")[0].selectedIndex=0}}else if(2==b.AntiFlicker){if(qb._EmpRayDisplay(),b.ExposureSpeed){a("#camera_ExposureMode").val(4),a("#camera_ExposureSpeed").empty();var F=[],G=[];if(2==k.WideDynamicRange&&0!=b.WideDynamicRange&&2==e[0].WideDynamicRange){var H=t.slice(1,8),I=u.slice(1,8);F=v.slice(1,8),qb._speExposureSpeed(H,F),qb._sortArray(H,I,F);for(var B=0;B<H.length;B++)a("#camera_ExposureSpeed")[0].options.add(new Option(H[B],F[B]))}else{var J=t.slice(0,m-1),K=u.slice(0,m-1);for(G=v.slice(0,m-1),qb._sortArray(J,K,G),qb._filterArray(J,K,0,G),i=0;i<J.length;i++)a("#camera_ExposureSpeed")[0].options.add(new Option(J[i],G[i]))}b.ExposureSpeed=2*m,b.ExposureValue2==b.ExposureValue1&&(F.contains(b.ExposureValue2)||G.contains(b.ExposureValue2))?a("#camera_ExposureSpeed").val(b.ExposureValue2):a("#camera_ExposureSpeed")[0].selectedIndex=0}}else if(0==b.AntiFlicker&&(qb._EmpRayDisplay(),b.ExposureSpeed||-1===webApp.ProcessInfo.indexOf("A5S")&&0==b.ExposureSpeed&&2==a("#camera_ExposureMode").val())){var L=a("#camera_ExposureMode").val();a("#camera_ExposureMode").val(4),a("#camera_ExposureSpeed").empty();var M=[],V=[];if(-1!==webApp.DeviceType.indexOf("3110")){var W=w.slice(0,m-1),X=x.slice(0,m-1);for(M=y.slice(0,m-1),qb._sortArray(W,X,M),i=0;i<W.length;i++)a("#camera_ExposureSpeed")[0].options.add(new Option(W[i],M[i]))}else if(0!=b.WideDynamicRange&&2==e[0].WideDynamicRange){var Y=w.slice(2,10),Z=x.slice(2,10);V=y.slice(2,10),qb._speExposureSpeed(Y,V),qb._sortArray(Y,Z,V);for(var B=0;B<Y.length;B++)a("#camera_ExposureSpeed")[0].options.add(new Option(Y[B],V[B]));a("#camera_ExposureSpeed")[0].options.add(new Option(tl("w_CostomDifsec"),"Custom"))}else{var $=t.slice(0,m-1),_=q.slice(0,m-1);$.combine(_);var ab=$.length;m>14&&(ab=$.length+1);var W=w.slice(0,ab),X=x.slice(0,ab);if(M=y.slice(0,ab),qb._speExposureSpeed(W,M),qb._sortArray(W,X,M),-1===webApp.ProcessInfo.indexOf("A5S")&&2==L){var bb=12;"11"==isEnable("is_ExposureSpeed")?bb=14:"10"==isEnable("is_ExposureSpeed")?bb=13:"01"==isEnable("is_ExposureSpeed")&&(bb=13),W=W.slice(0,bb),M=M.slice(0,bb);var cb=W.indexOf("1/25");-1!==cb&&"NTSC"===webApp.VideoStandard&&(W.splice(cb,1),M.splice(cb,1))}for(i=0;i<W.length;i++)a("#camera_ExposureSpeed")[0].options.add(new Option(W[i],M[i]));a("#camera_ExposureSpeed")[0].options.add(new Option(tl("w_CostomDifsec"),"Custom"))}!(-1===webApp.ProcessInfo.indexOf("A5S")&&2==L)&&(b.ExposureSpeed=2*m),"4"==L&&b.ExposureValue2==b.ExposureValue1&&(M.contains(b.ExposureValue2)||V.contains(b.ExposureValue2))?(a("#camera_ExposureSpeed").val(b.ExposureValue2),a("#camera_showExposure").hide()):-1===webApp.ProcessInfo.indexOf("A5S")&&2==L&&0==b.ExposureValue1&&(M.contains(b.ExposureValue2)||V.contains(b.ExposureValue2))?(a("#camera_ExposureSpeed").val(b.ExposureValue2),a("#camera_showExposure").hide()):(a("#camera_ExposureSpeed").val("Custom"),a("#camera_showExposure").show())}if(a("#camera_ExposureValue1").val(b.ExposureValue1),a("#camera_ExposureValue2").val(b.ExposureValue2),a("#camera_GainMin").val(b.GainMin),a("#camera_GainMax").val(b.GainMax),a("#camera_DayNightColor").val(b.DayNightColor),a("#camera_ExposureMode").val(b.ExposureMode),qb._EmpModeDisplay(),a("#camera_whiteBalance").val(b.WhiteBalance),"Custom"==b.WhiteBalance&&(T.set(b.GainRed),U.set(b.GainBlue)),qb._resetBackMode(),qb._selectBackMode(),qb._BackModeDisplay(),b.Mirror?a("#camera_Mirror_enable").prop("checked",!0):a("#camera_Mirror_disable").prop("checked",!0),b.IrisAuto?a("#camera_autoIris_enable").prop("checked",!0):a("#camera_autoIris_disable").prop("checked",!0),N.set(f.Brightness),O.set(f.Contrast),P.set(f.Saturation),Q.set(f.Hue),R.set(h.EEMode),S.set(b.Gain),(1==a("#camera_ExposureMode").val()||2==a("#camera_ExposureMode").val())&&S.set(b.GainMax),qb._selectScrene(),qb._showfilpChangeEx(),jb&&(1==h.TridimDenoise?(a("#camera_3DRDeNoiseOn").prop("checked",!0),a("#camera_3DshowEstimate").show(),a("#camera_3Dintension").hide()):(a("#camera_3DRDeNoiseOff").prop("checked",!0),hb.set(0),ib.set(0),h.TridimEstimation=0,h.TridimIntensity=0,a("#camera_3DshowEstimate").hide(),a("#camera_3Dintension").hide()),0!=h.TridimEstimation&&hb.set(h.TridimEstimation),0!=h.TridimEstimation&&ib.set(h.TridimIntensity)),e[0].Gamma===!1?a("#camera_gamma").hide():mb.set(h.GammaMode),a("#camera_Sensitivity").val(b.DayNightSensitivity),a("#camera_DayNightDelay").val(b.DayNightSwitchDelay),qb._displayDayNight(),h.ImageStabilizationEnable?a("#camera_VideoStabilization_enable").prop("checked",!0):a("#camera_VideoStabilization_disable").prop("checked",!0),c.is("OcxStabilization").done(function(a){a&&d.ControlVideoStable(!!h.ImageStabilizationEnable)}),b.SmartIRExposure?a("#camera_SmartIR_enable").prop("checked",!0):a("#camera_SmartIR_disable").prop("checked",!0),n){var db=null;db=1==D?n[0][2]:2==D?n[0][0]:n[0][1],a("#camera_VideoInDefogMode").val(db.Mode),a("#camera_LightIntensityMode").val(db.LightIntensityMode),"Manul"==db.Mode?(a("#camera_ShowVideoInDefogModeWrap").show(),a("#camera_showLightIntensityMode").show(),a("#camera_VideoInDefogModeStrong").val(db.Intensity),"Manul"==db.LightIntensityMode?a("#camera_ShowLightIntensityModeStrongWrap").show():a("#camera_ShowLightIntensityModeStrongWrap").hide()):(a("#camera_ShowVideoInDefogModeWrap").hide(),a("#camera_showLightIntensityMode").hide(),a("#camera_ShowLightIntensityModeStrongWrap").hide()),a("#camera_LightIntensityModeStrong").val(db.LightIntensityLevel)}},_limitExposure:function(b){0==b?(a("#camera_ExposureValue1").off("blur"),a("#camera_ExposureValue1").on("blur",function(){qb._chaValue(this,e[0].MaxExposureTime)}),a("#camera_ExposureValue2").off("blur"),a("#camera_ExposureValue2").on("blur",function(){qb._chaValue(this,e[0].MaxExposureTime)}),a("#camera_MaxExposureTime").val(e[0].MaxExposureTime)):(a("#camera_ExposureValue1").off("blur"),a("#camera_ExposureValue2").off("blur"),"PAL"==webApp.VideoStandard?(a("#camera_ExposureValue1").on("blur",function(){qb._chaValue(this,40)}),a("#camera_ExposureValue2").on("blur",function(){qb._chaValue(this,40)}),a("#camera_MaxExposureTime").val(40)):(a("#camera_ExposureValue1").on("blur",function(){qb._chaValue(this,33.33)}),a("camera_ExposureValue2").on("blur",function(){qb._chaValue(this,33.33)}),a("#camera_MaxExposureTime").val(33.33)))},_resetExposure:function(){var b=g[0],c=e[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions);var d=e[0].Exposure;if(a("#camera_AntiFlicker_50").prop("checked")){var f=a("#camera_ExposureMode").val()-0;if(a("#camera_ExposureMode").empty(),1&c.ExposureMode&&(a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Automatic"),0)),a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Manual"),4))),a("#camera_ExposureSpeed").empty(),4==a("#camera_backlight").val()&&2==e[0].WideDynamicRange){var h=q.slice(1,8),i=r.slice(1,8),j=s.slice(1,8);qb._speExposureSpeed(h,j),qb._sortArray(h,i,j);for(var k=0;k<h.length;k++)a("#camera_ExposureSpeed")[0].options.add(new Option(h[k],j[k]))}else{var l=q.slice(0,d-1),m=r.slice(0,d-1),n=s.slice(0,d-1);for(qb._sortArray(l,m,n),qb._filterArray(l,m,1,n),z=0;z<l.length;z++)a("#camera_ExposureSpeed")[0].options.add(new Option(l[z],n[z]))}if(a("#camera_showGain").hide(),a("#camera_showExposureSpeed").hide(),a("#camera_showGainRange").hide(),a("#camera_showExposure").hide(),a("#camera_showExposureSlct").hide(),4!=f)b.ExposureMode=0,b.ExposureSpeed=0;else if(4==f){a("#camera_ExposureMode").val(f),a("#camera_showExposureSpeed").show(),a("#camera_showGain").show();for(var o=!1,p=a("#camera_ExposureSpeed")[0].options.length,z=0;p>z;z++)if("10"==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}if(o)a("#camera_ExposureSpeed").val(10);else{var B=(p/2).toInt();a("#camera_ExposureSpeed")[0].selectedIndex=B}b.ExposureSpeed=2*d}}else if(a("#camera_AntiFlicker_60").prop("checked")){var E=a("#camera_ExposureMode").val();if(a("#camera_ExposureMode").empty(),1&c.ExposureMode&&(a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Automatic"),0)),a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Manual"),4))),a("#camera_ExposureSpeed").empty(),4==a("#camera_backlight").val()&&2==e[0].WideDynamicRange){var F=t.slice(1,8),G=u.slice(1,8),H=v.slice(1,8);qb._speExposureSpeed(F,H),qb._sortArray(F,G,H);for(var k=0;k<F.length;k++)a("#camera_ExposureSpeed")[0].options.add(new Option(F[k],H[k]))}else{var I=t.slice(0,d-1),J=u.slice(0,d-1),K=v.slice(0,d-1);for(qb._sortArray(I,J,K),qb._filterArray(I,J,0,K),z=0;z<I.length;z++)a("#camera_ExposureSpeed")[0].options.add(new Option(I[z],K[z]))}if(a("#camera_showGain").hide(),a("#camera_showExposureSpeed").hide(),a("#camera_showGainRange").hide(),a("#camera_showExposure").hide(),a("#camera_showExposureSlct").hide(),4!=E)b.ExposureMode=0,b.ExposureSpeed=0;else{a("#camera_ExposureMode").val(E),a("#camera_showExposureSpeed").show(),a("#camera_showGain").show();for(var o=!1,p=a("#camera_ExposureSpeed")[0].options.length,z=0;p>z;z++)if(8.33==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}if(o)a("#camera_ExposureSpeed").val(8.33);else{var B=(p/2).toInt();a("#camera_ExposureSpeed")[0].selectedIndex=B}b.ExposureSpeed=2*d}}else{var L=a("#camera_ExposureMode").val();if(a("#camera_ExposureMode").empty(),1&c.ExposureMode&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Automatic"),0)),c.ExposureMode>>1&1&&4!=a("#camera_backlight").val()&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Gainfirst"),1)),c.ExposureMode>>2&1&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_ExposureTime"),2)),a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Manual"),4)),a("#camera_ExposureSpeed").empty(),-1!==webApp.DeviceType.indexOf("3110")){var M=w.slice(0,d-1),N=x.slice(0,d-1),O=y.slice(0,d-1);for(qb._sortArray(M,N,O),z=0;z<M.length;z++)a("#camera_ExposureSpeed")[0].options.add(new Option(M[z],O[z]))}else if(4==a("#camera_backlight").val()&&2==e[0].WideDynamicRange){var P=w.slice(2,10),Q=x.slice(2,10),R=y.slice(2,10);qb._speExposureSpeed(P,R),qb._sortArray(P,Q,R);for(var k=0;k<P.length;k++)a("#camera_ExposureSpeed")[0].options.add(new Option(P[k],R[k]));a("#camera_ExposureSpeed")[0].options.add(new Option(tl("w_CostomDifsec"),"Custom"))}else{var S=t.slice(0,d-1),T=q.slice(0,d-1);S.combine(T);var p=S.length;d>14&&(p=S.length+1);var M=w.slice(0,p),N=x.slice(0,p),O=y.slice(0,p);if(qb._speExposureSpeed(M,O),qb._sortArray(M,N,O),-1===webApp.ProcessInfo.indexOf("A5S")&&2==L){var U=12;"11"==isEnable("is_ExposureSpeed")?U=14:"10"==isEnable("is_ExposureSpeed")?U=13:"01"==isEnable("is_ExposureSpeed")&&(U=13),M=M.slice(0,U),O=O.slice(0,U);var V=M.indexOf("1/25");-1!==V&&"NTSC"===webApp.VideoStandard&&(M.splice(V,1),O.splice(V,1))}for(z=0;z<M.length;z++)a("#camera_ExposureSpeed")[0].options.add(new Option(M[z],O[z]));a("#camera_ExposureSpeed")[0].options.add(new Option(tl("w_CostomDifsec"),"Custom"))}if(a("#camera_ExposureMode").val(L),a("#camera_showGain").hide(),a("#camera_showExposureSpeed").hide(),a("#camera_showExposureSlct").hide(),a("#camera_showGainRange").hide(),a("#camera_showExposure").hide(),4==L||-1===webApp.ProcessInfo.indexOf("A5S")&&2==L){a("#camera_ExposureMode").val(L),a("#camera_showExposureSpeed").show(),4==L&&a("#camera_showGain").is(":visible");for(var o=!1,d=e[0].Exposure,p=a("#camera_ExposureSpeed")[0].options.length,z=0;p>z;z++)if(-1!==webApp.DeviceType.indexOf("3110")){if(d>9){if("PAL"==webApp.VideoStandard){if(40==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}}else if(33.33==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}}else if(1==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}}else if(4==a("#camera_backlight").val()&&2==e[0].WideDynamicRange){if(10==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}}else if(d>9){if("PAL"==webApp.VideoStandard){if(40==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}}else if(33.33==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}}else if(10==a("#camera_ExposureSpeed")[0].options[z].value){o=!0;break}if(o)a("#camera_ExposureSpeed").val(-1!==webApp.DeviceType.indexOf("3110")?d>9?"PAL"==webApp.VideoStandard?40:33.33:1:4==a("#camera_backlight").val()&&2==e[0].WideDynamicRange?10:d>9?"PAL"==webApp.VideoStandard?40:33.33:10);else{var B=(p/2).toInt();a("#camera_ExposureSpeed")[0].selectedIndex=B}!(-1===webApp.ProcessInfo.indexOf("A5S")&&2==L)&&(b.ExposureSpeed=2*d),-1!==webApp.DeviceType.indexOf("3110")&&(a("#camera_showGain").hide(),a("#camera_showGainRange").show()),b.ExposureValue1=b.ExposureValue2=a("#camera_ExposureSpeed").val()-0,2==L&&(b.ExposureValue1=0)}else b.ExposureSpeed=0,b.ExposureValue1=0,0==L&&-1!==webApp.DeviceType.indexOf("3110")&&a("#camera_showGain").show(),2==L&&(1==e[0].WideDynamicRange&&a("#camera_showExposureSlct").show(),"PAL"==webApp.VideoStandard?A.contains(b.ExposureValue2)&&0==b.ExposureValue1?-1!==webApp.ProcessInfo.indexOf("A5S")?a("#camera_ExposureSlct").val(b.ExposureValue2):2==a("#camera_backlight").val()&&1==e[0].WideDynamicRange?a("#camera_ExposureSlct").val(b.ExposureValue2):4==a("#camera_backlight").val()&&2==e[0].WideDynamicRange?(a("#camera_ExposureSlct").val(10),b.ExposureValue2=10):(a("#camera_showExposureSlct").hide(),a("#camera_showExposureSpeed").show(),a("#camera_ExposureSpeed").val(b.ExposureValue2)):(a("#camera_ExposureSlct").val("Custom"),a("#camera_showExposure").show()):C.contains(b.ExposureValue2)&&0==b.ExposureValue1?a("#camera_ExposureSlct").val(b.ExposureValue2):(a("#camera_ExposureSlct").val("Custom"),a("#camera_showExposure").show()),a("#camera_Exposure_label").text("")),1==L&&(a("#camera_showGain").hide(),a("#camera_showGainRange").show())
}},_setDefaultExposure:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),b.ExposureValue1=0,a("#camera_ExposureValue1").val(0),"PAL"==webApp.VideoStandard?(b.ExposureValue2=40,a("#camera_ExposureValue2").val(40)):(b.ExposureValue2=33.33,a("#camera_ExposureValue2").val(33.33)),b.GainMin=0,b.GainMax=50,a("#camera_GainMin").val(0),a("#camera_GainMax").val(50),(1==a("#camera_ExposureMode").val()||2==a("#camera_ExposureMode").val())&&S.set(b.GainMax)},_selectBackMode:function(){var b=g[0],c=e[0],d=a("#camera_backlight");1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),a("#camera_showWDRValue").css("top",10),a("#camera_showWDRValue").hide(),a("#camera_backlight").val(0),qb._limitExposure(2==a("#camera_ExposureMode").val()?1:0),fb=0,b.Backlight&&(d.val(1),fb=1),1==c.WideDynamicRange?0!=b.WideDynamicRange&&(d.val(2),fb=2,a("#camera_showWDRValue").show(),V.set(b.WideDynamicRange)):2==c.WideDynamicRange?0!=b.WideDynamicRange&&(d.val(4),fb=4,a("#camera_showWDRValue").show(),V.set(b.WideDynamicRange),qb._limitExposure(1)):3==c.WideDynamicRange&&0!=b.WideDynamicRange&&d.val(5);var f=-1===webApp.ProcessInfo.indexOf("A5S")&&a("#camera_AntiFlicker_70").prop("checked")&&0==a("#camera_ExposureMode").val(),h=null!=b.GlareInhibition&&0!=b.GlareInhibition;(f||-1!==webApp.ProcessInfo.indexOf("A5S")||-1!==webApp.ProcessInfo.indexOf("S2"))&&h&&(d.val(3),fb=3,a("#camera_showWDRValue").show(),V.set(b.GlareInhibition)),ob&&2==b.WideDynamicRangeMode&&d.val(6),""==d.val()&&d.val(0),4!=d.val()&&gb?a("#camera_showAntiFlicker").show():a("#camera_showAntiFlicker").hide()},_sortArray:function(a,b,c){for(var d,e,f,g=a.length,h=0;g>h;h++)for(var i=0;g>i;i++)a[h].slice(2)-0>a[i].slice(2)-0&&(d=a[i],a[i]=a[h],a[h]=d,e=b[i],b[i]=b[h],b[h]=e,f=c[i],c[i]=c[h],c[h]=f)},_filterArray:function(b,c,d,e){if(1==d)for(var f=["1/100","1/50","1/25","1/10","1/5","1/4"],g=0;g<b.length;g++)-1===a.inArray(b[g],f)&&(b.erase(b[g]),c.erase(c[g]),e.erase(e[g]),--g);else for(var h=["1/120","1/60","1/30","1/12","1/6","1/4"],g=0;g<b.length;g++)-1===a.inArray(b[g],h)&&(b.erase(b[g]),c.erase(c[g]),e.erase(e[g]),--g)},_parsecurrentTime:function(a){if(a)var b=a.trim().split(" "),c=b[1].split(":"),d=c[0]-0,e=c[1]-0,f=c[2]-0,g=60*(60*d+e)+f;else g=43200;return g},_getCurrentPage:function(){var a=g[0];0==a.NightOptions.SwitchMode?qb._changeDayNighr(0):3==a.NightOptions.SwitchMode?qb._changeDayNighr(1):2==a.NightOptions.SwitchMode?b.Global.getCurrentTime().done(function(a){qb._changeDayNighr(qb._isDaytime(qb._parsecurrentTime(a))?0:1)}):4==a.NightOptions.SwitchMode&&qb._changeDayNighr(2)},_isDaytime:function(a){var b=eb.start,c=eb.end,d=b.split(":")[0]-0,e=b.split(":")[1]-0,f=0,g=c.split(":")[0]-0,h=c.split(":")[1]-0,i=0,j=60*(60*d+e)+f,k=60*(60*g+h)+i;return E=k>=j?a>=j&&k>a?!0:!1:a>=j||k>a?!0:!1},_selectScrene:function(){"Custom"==a("#camera_whiteBalance").val()?(a("#camera_showRedGain").show(),a("#camera_showBlueGain").show()):(a("#camera_showRedGain").hide(),a("#camera_showBlueGain").hide())},_isCanFilp:function(a){var c=a[0].MainFormat[0].Video.Width,d=a[0].MainFormat[0].Video.Height,e=a[0].SnapFormat[0].Video.Width,f=a[0].SnapFormat[0].Video.Height;b.MagicBox.getProductDefinition("RotateResolutionLimit").done(function(a){var b=getRorateFrame(c,d),g=getRorateFrame(e,f);F=a.contains(b)&&a.contains(g)?!1:!0})},_getRorateRect:function(){var a=g[0];1==D?a=g[0].NightOptions:2==D&&(a=g[0].NormalOptions);var b=a.BacklightRegion,c=0;0==a.Rotate90&&0==a.Flip?(qb._Rotate(b[0],b[1],b[2],b[3],0),c=0):0==a.Rotate90&&1==a.Flip?(qb._Rotate(b[0],b[1],b[2],b[3],180),c=180):1==a.Rotate90?(qb._Rotate(b[0],b[1],b[2],b[3],90),c=90):2==a.Rotate90&&(qb._Rotate(b[0],b[1],b[2],b[3],270),c=270),a.Mirror&&qb._getMirrorEx(J,K,L,M,c),qb._showBackArea(J,K,L,M)},_getVideoInCaps:function(){var a=c.get("VideoInputCaps").done(function(a){a&&(e[0]=a)}),b=c.get("VideoInputCapsEx").done(function(a){a&&(f=a)});return jQuery.when(a,b)},_chaValue:function(c,d){qb._limitFloat(c,d);var e=g[0];1==D?e=g[0].NightOptions:2==D&&(e=g[0].NormalOptions),a("#camera_ExposureValue1").val()-0>a("#camera_ExposureValue2").val()-0&&a("#camera_ExposureValue2").val(a("#camera_ExposureValue1").val()),e.ExposureValue1=a("#camera_ExposureValue1").val()-0,e.ExposureValue2=a("#camera_ExposureValue2").val()-0,b.ConfigManager.setTemporaryConfig("VideoInOptions",g).fail(qb._postresult)},_limitFloat:function(a,b){var c=a.value;if(!/^[0-9]+[.]?[0-9]*$/.test(a.value))return void(a.value="0");if("."==c.charAt(0))return void(a.value="0"+c);if(/[.]/.test(c)){c=c.replace(/[^0-9, ^.]/g,"");var d=c.indexOf(".",c.indexOf(".")+1);a.value=d>0?c.slice(0,d):c,1==a.value.indexOf(".")&&a.value.length>4&&(a.value=a.value.slice(0,4))}else a.value=c.replace(/[^0-9, ^.]/g,"");("00"==a.value||"0.0"==a.value||""==a.value||"0."==a.value||a.value-0<.01)&&(a.value="0"),a.value-0>e[0].MaxExposureTime&&(a.value=e[0].MaxExposureTime),a.value=a.value-0,a.value>b&&(a.value=b)},_postresult:function(){remarkDisplay("camera_remark",tl("Saving failure"),3e3,1)},_setBrightness:function(){if(1!=db){var a=j[0][0];1==D?a=j[0][1]:2==D&&(a=j[0][2]),a.Brightness=W,b.ConfigManager.setTemporaryConfig("VideoColor",j).fail(qb._postresult)}},_setContrast:function(){if(1!=db){var a=j[0][0];1==D?a=j[0][1]:2==D&&(a=j[0][2]),a.Contrast=X,b.ConfigManager.setTemporaryConfig("VideoColor",j).fail(qb._postresult)}},_setSaturation:function(){if(1!=db){var a=j[0][0];1==D?a=j[0][1]:2==D&&(a=j[0][2]),a.Saturation=Y,b.ConfigManager.setTemporaryConfig("VideoColor",j).fail(qb._postresult)}},_setHue:function(){if(1!=db){var a=j[0][0];1==D?a=j[0][1]:2==D&&(a=j[0][2]),a.Hue=Z,b.ConfigManager.setTemporaryConfig("VideoColor",j).fail(qb._postresult)}},_setEEMode:function(){if(1!=db){var a=l[0].DayOptions;1==D?a=l[0].NightOptions:2==D&&(a=l[0].NormalOptions),a.EEMode=$,b.ConfigManager.setTemporaryConfig("VideoInPreviewOptions",l).fail(qb._postresult)}},_postBackValue:function(){if(1!=db){var c=g[0];1==D?c=g[0].NightOptions:2==D&&(c=g[0].NormalOptions),3==a("#camera_backlight").val()?c.GlareInhibition=cb:c.WideDynamicRange=cb,b.ConfigManager.setTemporaryConfig("VideoInOptions",g).fail(qb._postresult)}},_postGainOnly:function(){if(1!=db){var c=g[0];1==D?c=g[0].NightOptions:2==D&&(c=g[0].NormalOptions),1==a("#camera_ExposureMode").val()||2==a("#camera_ExposureMode").val()?(c.GainMin=0,c.GainMax=_):c.Gain=_,b.ConfigManager.setTemporaryConfig("VideoInOptions",g).fail(qb._postresult)}},_changeDayNighr:function(b){a("#camera_backlightDefault").prop("checked",!0),0==b?(a("#camera_config_mode").val(0),D=0):1==b?(a("#camera_config_mode").val(1),D=1):(a("#camera_config_mode").val(2),D=2),qb._changeTempTime(),qb._putValue(),qb._showBackLightInit(),qb._EmpRayDisplay(),qb._resetBackMode(),qb._selectBackMode(),qb._post()},_EmpRayDisplay:function(){var b=g[0],c=e[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),1==b.AntiFlicker?(a("#camera_ExposureMode").empty(),1&c.ExposureMode&&(a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Automatic"),0)),a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Manual"),4)))):2==b.AntiFlicker?(a("#camera_ExposureMode").empty(),1&c.ExposureMode&&(a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Automatic"),0)),a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Manual"),4)))):0==b.AntiFlicker&&(a("#camera_ExposureMode").empty(),1&c.ExposureMode&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Automatic"),0)),c.ExposureMode>>1&1&&4!=a("camera_backlight").value&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Gainfirst"),1)),c.ExposureMode>>2&1&&a("#camera_ExposureMode")[0].options.add(new Option(tl("w_ExposureTime"),2)),a("#camera_ExposureMode")[0].options.add(new Option(tl("w_Manual"),4))),a("#camera_ExposureMode").val(b.ExposureMode),qb._manuEmpNOpost()},_manuEmpNOpost:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),1==b.AntiFlicker?a("#camera_AntiFlicker_50").prop("checked",!0):2==b.AntiFlicker?a("#camera_AntiFlicker_60").prop("checked",!0):0==b.AntiFlicker&&a("#camera_AntiFlicker_70").prop("checked",!0)},_EmpModeDisplay:function(){a("#camera_GainRange_label").text(tl("w_Gainregulate"));var b=g[0];switch(1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),a("#camera_showExposureSlct").hide(),a("#camera_Exposure_label").text(tl("w_KmScope")),a("#camera_ExposureMode").val()-0){case 0:qb._onEmpAuto();break;case 1:qb._onEmpAuto1();break;case 2:qb._onEmpAuto2();break;case 3:break;case 4:qb._onEmpManu()}qb._hideForK6()},_changeExposure:function(){var c=g[0];1==D?c=g[0].NightOptions:2==D&&(c=g[0].NormalOptions),"Custom"!=a("#camera_ExposureSlct").val()?(a("#camera_showExposure").hide(),c.ExposureValue1=0,c.ExposureValue2=a("#camera_ExposureSlct").val()-0):(a("#camera_showExposure").show(),a("#camera_Exposure_label").text(""),a("#camera_ExposureValue1").val(0),a("#camera_ExposureValue2").val(c.ExposureValue2),c.ExposureValue1=0,c.ExposureValue2=a("#camera_ExposureValue2").val()-0),b.ConfigManager.setTemporaryConfig("VideoInOptions",g).fail(qb._postresult)},_BackModeDisplay:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions);var c=a("#camera_backlight").val();a("#camera_showBacklightMode").hide(),a("#camera_btn_backlight").hide(),a("#camera_showWDR").hide(),a("#camera_showWDRValue").hide(),0==c?(b.Backlight=0,b.WideDynamicRange=0,b.GlareInhibition=0):1==c?(a("#camera_showBacklightMode").show(),(-1!==webApp.DeviceType.indexOf("3110")||1==e[0].Backlight)&&a("#camera_showBacklightMode").hide(),a("#camera_btn_backlight").show(),b.WideDynamicRange=0,b.GlareInhibition=0,qb._showBackSelect(b.Backlight)):6==c?(b.WideDynamicRange=0,b.GlareInhibition=0,b.Backlight=0,b.WideDynamicRangeMode=2):(2==e[0].WideDynamicRange&&a("#camera_GainRange_label").text(tl("GainMax")),a("#camera_showWDRValue").show(),b.Backlight=0,b.WideDynamicRangeMode=1,3==c?(b.WideDynamicRange=0,V.set(b.GlareInhibition)):(V.set(b.WideDynamicRange),b.GlareInhibition=0)),qb._hideForK6()},_onEmpAuto:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),b.GainAuto=!0,a("#camera_showExposure").hide(),e[0].ExposureMode>>3&1||e[0].ExposureMode>>4&1?a("#camera_AntiFlicker_50").prop("checked")||a("#camera_AntiFlicker_60").prop("checked")?a("#camera_showGain").hide():(a("#camera_showGain").hide(),-1!==webApp.DeviceType.indexOf("3110")&&a("#camera_showGain").show()):a("#camera_showGain").show(),a("#camera_showExposureSpeed").hide(),a("#camera_showGainRange").hide()},_onEmpAuto1:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),b.GainAuto=!0,a("#camera_showExposure").hide(),a("#camera_showGain").hide(),a("#camera_showExposureSpeed").hide(),a("#camera_showGainRange").show(),a("#camera_GainRange_label").text(tl("w_GainScope"))},_onEmpAuto2:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),a("#camera_showExposure").hide(),a("#camera_showGain").hide(),a("#camera_showExposureSpeed").hide(),a("#camera_showGainRange").hide(),a("#camera_showExposureSlct").hide(),a("#camera_GainRange_label").text(tl("w_GainScope")),"PAL"==webApp.VideoStandard?A.contains(b.ExposureValue2)&&0==b.ExposureValue1?a("#camera_ExposureSlct").val(b.ExposureValue2):(a("#camera_showExposure").show(),a("#camera_ExposureSlct").val("Custom")):C.contains(b.ExposureValue2)&&0==b.ExposureValue1?a("#camera_ExposureSlct").val(b.ExposureValue2):(a("#camera_showExposure").show(),a("#camera_ExposureSlct").val("Custom"));var c=a("#camera_showExposureSlct");-1===webApp.ProcessInfo.indexOf("A5S")&&(c=a("#camera_showExposureSpeed"),"Custom"!=a("#camera_ExposureSpeed").val()?a("#camera_showExposure").hide():a("#camera_showExposure").show()),c.show(),a("#camera_Exposure_label").text("")},_onEmpManu:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),4==a("#camera_backlight").val()&&a("#camera_GainRange_label").text(tl("GainMax")),b.GainAuto=!0,a("#camera_showExposure").hide(),"Custom"==a("#camera_ExposureSpeed").val()&&a("#camera_showExposure").show(),a("#camera_showGain").show(),a("#camera_showExposureSpeed").show(),a("#camera_showGainRange").hide(),-1!==webApp.DeviceType.indexOf("3110")&&(a("#camera_showGain").hide(),a("#camera_showGainRange").show(),b.GainAuto=!1),S.set(b.Gain)},_showBackSelect:function(b){switch(a("#camera_backlightDefault").prop("checked",!1),a("#camera_backlightCustom").prop("checked",!1),b){case 1:a("#camera_backlightDefault").prop("checked",!1),qb._drawBackline(!1);break;case 2:a("#camera_backlightCustom").prop("checked",!0),qb._drawBackline(!0)}a("#camera_backlightDefault").prop("checked")||a("#camera_backlightCustom").prop("checked")||a("#camera_backlightDefault").prop("checked",!1),a("#camera_backlightCustom").prop("checked")?a("#camera_btn_backlight").show():a("#camera_btn_backlight").hide()},_onSelectBackMode:function(){var c=g[0];1==D?c=g[0].NightOptions:2==D&&(c=g[0].NormalOptions),db=1,4==fb&&qb._resetExposure(),gb&&a("#camera_showAntiFlicker").show(),qb._limitExposure(2==a("#camera_ExposureMode").val()?1:0);var d=a("#camera_backlight").val(),f=d;if(a("#camera_showBacklightMode").hide(),a("#camera_btn_backlight").hide(),a("#camera_showWDR").hide(),a("#camera_showWDRValue").hide(),c.WideDynamicRangeMode=0,0==f)qb._drawBackline(!1),c.Backlight=0,c.WideDynamicRange=0,c.GlareInhibition=0;else if(1==f)-1!==webApp.DeviceType.indexOf("3110")||1==e[0].Backlight?a("#camera_showBacklightMode").hide():a("#camera_showBacklightMode").show(),a("#camera_btn_backlight").show(),a("#camera_backlightDefault").prop("checked")&&(c.Backlight=1,qb._drawBackline(!1)),a("#camera_backlightCustom").prop("checked")&&(c.Backlight=2,qb._drawBackline(!0),a("#camera_btn_backlight").removeClass().addClass("camera-draw-icon-on"),a("#camera_btn_backlight").show()),c.WideDynamicRange=0,c.GlareInhibition=0,qb._showBackSelect(c.Backlight);else if(2==f)a("#camera_showWDRValue").show(),qb._drawBackline(!1),c.Backlight=0,c.GlareInhibition=0,c.WideDynamicRange=50,c.WideDynamicRangeMode=1,V.set(c.WideDynamicRange);else if(3==f)a("#camera_showWDRValue").show(),qb._drawBackline(!1),c.Backlight=0,c.WideDynamicRange=0,c.GlareInhibition=50,V.set(c.GlareInhibition);else if(4==f){qb._drawBackline(!1),a("#camera_showWDRValue").show(),c.Backlight=0,c.GlareInhibition=0,c.WideDynamicRange=50,c.WideDynamicRangeMode=1,V.set(c.WideDynamicRange),c.AntiFlicker=0,qb._EmpRayDisplay(),qb._resetExposure();for(var h=a("#camera_ExposureMode")[0].options.length,i=!1,j=0;h>j;j++)if(a("#camera_ExposureMode")[0].options[j].value==c.ExposureMode){i=!0;break}i||(a("#camera_ExposureMode").val(0),c.ExposureMode=0,qb._EmpModeDisplay(),qb._setDefaultExposure()),gb&&a("#camera_showAntiFlicker").hide(),qb._limitExposure(1)}else 5==f?(qb._drawBackline(!1),c.Backlight=0,c.GlareInhibition=0,c.WideDynamicRange=1,c.WideDynamicRangeMode=1):6==f&&(qb._drawBackline(!1),c.Backlight=0,c.WideDynamicRange=0,c.GlareInhibition=0,c.WideDynamicRangeMode=2);qb._resetBackMode(),a("#camera_backlight").val(d),db=0,b.ConfigManager.setTemporaryConfig("VideoInOptions",g).fail(qb._postresult)},_drawBackline:function(a){Site.currentPage.is.cameraConfig&&(a=1==a?1:0,d.SetRegionNum(a)),a&&qb._getRorateRect()},_post:function(){{var f=g[0],h=l[0];e[0]}if(0==D?h=l[0].DayOptions:1==D?(f=g[0].NightOptions,h=l[0].NightOptions):2==D&&(f=g[0].NormalOptions,h=l[0].NormalOptions),f.DayNightColor=a("#camera_DayNightColor").val()-0,f.ExposureMode=a("#camera_ExposureMode").val()-0,f.IrisAuto=a("#camera_autoIris_enable").prop("checked")?!0:!1,f.WhiteBalance=a("#camera_whiteBalance").val(),"Custom"==a("#camera_whiteBalance").val()&&(f.GainRed=ab,f.GainBlue=bb),1!=a("#camera_ExposureMode").val()&&(f.GainMin=a("#camera_GainMin").val()-0,f.GainMax=a("#camera_GainMax").val()-0),f.AntiFlicker=a("#camera_AntiFlicker_50").prop("checked")?1:a("#camera_AntiFlicker_60").prop("checked")?2:0,4==a("#camera_ExposureMode").val()){"Custom"==a("#camera_ExposureSpeed").val()?(f.ExposureValue1=a("#camera_ExposureValue1").val()-0,f.ExposureValue2=a("#camera_ExposureValue2").val()-0):(f.ExposureValue1=a("#camera_ExposureSpeed").val()-0,f.ExposureValue2=a("#camera_ExposureSpeed").val()-0);var i=e[0].Exposure;f.ExposureSpeed=2*i}else-1===webApp.ProcessInfo.indexOf("A5S")&&2==a("#camera_ExposureMode").val()&&("Custom"==a("#camera_ExposureSpeed").val()?(f.ExposureValue1=a("#camera_ExposureValue1").val()-0,f.ExposureValue2=a("#camera_ExposureValue2").val()-0):(f.ExposureValue1=0,f.ExposureValue2=a("#camera_ExposureSpeed").val()-0),f.ExposureSpeed=0);if(g[0].Mirror=a("#camera_Mirror_enable").prop("checked"),g[0].NightOptions.Mirror=a("#camera_Mirror_enable").prop("checked"),g[0].NormalOptions.Mirror=a("#camera_Mirror_enable").prop("checked"),jb&&(h.TridimEstimation=kb-0,h.TridimIntensity=lb-0,h.TridimDenoise=a("#camera_3DRDeNoiseOn").prop("checked")?1:0),h.ImageStabilizationEnable=a("#camera_VideoStabilization_enable").prop("checked"),c.is("OcxStabilization").done(function(a){a&&d.ControlVideoStable(!!h.ImageStabilizationEnable)}),f.SmartIRExposure=a("#camera_SmartIR_enable").prop("checked"),f.DayNightSensitivity=a("#camera_Sensitivity").val()-0,f.DayNightSwitchDelay=a("#camera_DayNightDelay").val()-0,n){var j=null;j=1==D?n[0][2]:2==D?n[0][0]:n[0][1],j.Mode=a("#camera_VideoInDefogMode").val(),"Manul"==a("#camera_VideoInDefogMode").val()&&(j.Intensity=a("#camera_VideoInDefogModeStrong").val()-0,j.LightIntensityMode=a("#camera_LightIntensityMode").val(),"Manul"==a("#camera_LightIntensityMode").val()&&(j.LightIntensityLevel=a("#camera_LightIntensityModeStrong").val()-0))}jb?n?b.ConfigManager.setTemporaryConfig(["VideoInOptions","VideoInPreviewOptions","VideoInDefog"],[g,l,n]).done(function(a){common.chkMutilCallRet(a)||remarkDisplay("camera_remark",tl("Saving failure"),3e3,1)}):b.ConfigManager.setTemporaryConfig(["VideoInOptions","VideoInPreviewOptions"],[g,l]).done(function(a){common.chkMutilCallRet(a)||remarkDisplay("camera_remark",tl("Saving failure"),3e3,1)}):n?b.ConfigManager.setTemporaryConfig(["VideoInOptions","VideoInDefog"],[g,n]).done(function(a){common.chkMutilCallRet(a)||remarkDisplay("camera_remark",tl("Saving failure"),3e3,1)}):b.ConfigManager.setTemporaryConfig("VideoInOptions",g).fail(qb._postresult)},_Rotate:function(a,b,c,d,e){var f,g,h,i;0==e&&(f=a,g=b,h=c,i=d),90==e&&(f=8191-b,g=a,h=8191-d,i=c),180==e&&(f=a,g=8191-b,h=c,i=8191-d),270==e&&(f=b,g=8191-a,h=d,i=8191-c),J=f>h?h:f,K=g>i?i:g,L=f>h?f:h,M=g>i?g:i},_showBackArea:function(a,b,c,e){g[0];d.SetSelRegionByIndex(0,a,b,c,e)},_postBacklineCfg:function(c,d,e,f){if(!(-1==c&&-1==d&&-1==e&&-1==f||0==c&&0==d&&0==e&&0==f)){var h=g[0];1==D?h=g[0].NightOptions:2==D&&(h=g[0].NormalOptions),h.Backlight=2,h.WideDynamicRange=0,h.GlareInhibition=0;var i=getDefaultRect(c,d,e,f),j=i[0],k=i[1],l=i[2],m=i[3],n=0;1==h.Rotate90?(qb._Rotate(j,k,l,m,270),n=0):2==h.Rotate90?(qb._Rotate(j,k,l,m,90),n=180):h.Flip?(qb._Rotate(j,k,l,m,180),n=180):(qb._Rotate(j,k,l,m,0),n=0),a("#camera_Mirror_enable").prop("checked")&&qb._getMirrorEx(J,K,L,M,n),h.BacklightRegion!=J+","+K+","+L+","+M&&(g[0].BacklightRegion=[J,K,L,M],g[0].NightOptions.BacklightRegion=[J,K,L,M],g[0].NormalOptions.BacklightRegion=[J,K,L,M],b.ConfigManager.setTemporaryConfig("VideoInOptions",g).fail(qb._postresult))}},_showfilpChangeEx:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions);var c=0;0==b.Flip&&0==b.Rotate90?c=0:0==b.Flip&&1==b.Rotate90?c=1:1==b.Flip&&0==b.Rotate90?c=2:0==b.Flip&&2==b.Rotate90&&(c=3),a("#camera_select_filp").val(c)},_getMirror:function(b,c,d,e){(0==a("#camera_select_filp").val()||2==a("#camera_select_filp").val())&&(J=8191-d,K=c,L=8191-b,M=e),(1==a("#camera_select_filp").val()||3==a("#camera_select_filp").val())&&(J=b,K=8191-e,L=d,M=8191-c)},_getMirrorEx:function(a,b,c,d,e){(0==e||180==e)&&(J=8191-c,K=b,L=8191-a,M=d),(90==e||270==e)&&(J=a,K=8191-d,L=c,M=8191-b)},_changeMirror:function(){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions);var c=b.BacklightRegion;H=b.Rotate90,0==H?1==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],90):2==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],270):0==I&&1==b.Flip?qb._Rotate(c[0],c[1],c[2],c[3],180):1==I&&0==b.Flip?qb._Rotate(c[0],c[1],c[2],c[3],0):qb._Rotate(c[0],c[1],c[2],c[3],0):1==H?(0==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],0):2==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],270):qb._Rotate(c[0],c[1],c[2],c[3],90),b.Flip&&qb._Rotate(c[0],c[1],c[2],c[3],180)):2==H&&(0==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],0):1==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],90):qb._Rotate(c[0],c[1],c[2],c[3],270),b.Flip&&qb._Rotate(c[0],c[1],c[2],c[3],180)),a("#camera_Mirror_enable").prop("checked")&&qb._getMirror(J,K,L,M),qb._showBackArea(J,K,L,M)},_showFilpChange:function(){var c=g[0],d=g[0].NightOptions,e=g[0].NormalOptions;if(H=c.Rotate90,I=c.Flip,G=1==a("#camera_backlight").val()?!0:!1,F&&(1==a("#camera_select_filp").val()||3==a("#camera_select_filp").val()))return remarkDisplay("camera_remark",tl("w_can not Filp"),3e3,1),void qb._showfilpChangeEx();var f=a("#camera_select_filp").val();0==f?(c.Flip=!1,c.Rotate90=0,d.Flip=!1,d.Rotate90=0,e.Flip=!1,e.Rotate90=0):1==f?(c.Flip=!1,c.Rotate90=1,d.Flip=!1,d.Rotate90=1,e.Flip=!1,e.Rotate90=1):2==f?(c.Flip=!0,c.Rotate90=0,d.Flip=!0,d.Rotate90=0,e.Flip=!0,e.Rotate90=0):3==f&&(c.Flip=!1,c.Rotate90=2,d.Flip=!1,d.Rotate90=2,e.Flip=!1,e.Rotate90=2),b.ConfigManager.setTemporaryConfig("VideoInOptions",g).done(function(){var b=g[0];if(1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),G){var c=b.BacklightRegion;0==H?1==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],90):2==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],270):0==I&&1==b.Flip?qb._Rotate(c[0],c[1],c[2],c[3],180):1==I&&0==b.Flip?qb._Rotate(c[0],c[1],c[2],c[3],0):qb._Rotate(c[0],c[1],c[2],c[3],0):1==H?(0==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],0):2==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],270):qb._Rotate(c[0],c[1],c[2],c[3],90),b.Flip&&qb._Rotate(c[0],c[1],c[2],c[3],180)):2==H&&(0==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],0):1==b.Rotate90?qb._Rotate(c[0],c[1],c[2],c[3],90):qb._Rotate(c[0],c[1],c[2],c[3],270),b.Flip&&qb._Rotate(c[0],c[1],c[2],c[3],180)),a("#camera_Mirror_enable").prop("checked")&&qb._getMirror(J,K,L,M),qb._showBackArea(J,K,L,M)}}).fail(function(){remarkDisplay("camera_remark",tl("Saving failure"),3e3,1)})},_checkGain:function(c,d,e){c="#"+c;var f=a(c).val().replace(/[^\d]/g,0)-0;""==f&&a(c).val(0),a(c).val(f>e?e:d>f?d:f);var h=g[0];1==D?h=g[0].NightOptions:2==D&&(h=g[0].NormalOptions),a("#camera_GainMin").val()-0>a("#camera_GainMax").val()-0&&(a("#camera_GainMax").val()=a("#camera_GainMin").val()),h.GainMin=a("#camera_GainMin").val()-0,h.GainMax=a("#camera_GainMax").val()-0,b.ConfigManager.setTemporaryConfig("VideoInOptions",g).fail(qb._postresult)},_clearAndDrawArea:function(){"camera-draw-icon-off"==a("#camera_btn_backlight")[0].className?(a("#camera_btn_backlight")[0].className="camera-draw-icon-on",qb._drawBackline(!0)):(a("#camera_btn_backlight")[0].className="camera-draw-icon-off",qb._drawBackline(!1))},_onSelectEmpMode:function(){qb._EmpModeDisplay(),qb._setDefaultExposure(),qb._resetExposure(),qb._resetBackMode(),qb._selectBackMode(),qb._resetGlareInhibition(),qb._post()},_chaManulExposure:function(){if("Custom"==a("#camera_ExposureSpeed").val()){var b=g[0];1==D?b=g[0].NightOptions:2==D&&(b=g[0].NormalOptions),a("#camera_showExposure").show();var c=a("#camera_MaxExposureTime").text()-0;b.ExposureValue2>c&&(b.ExposureValue2=c),b.ExposureValue1=0,a("#camera_ExposureValue1").val(0),a("#camera_ExposureValue2").val(b.ExposureValue2)}else a("#camera_showExposure").hide();qb._post()},_cfgScrene:function(){qb._selectScrene(),"Custom"==a("#camera_whiteBalance").val()?b.DevVideoInput.getVideoInStatus().done(function(a){T.set(a.GainRed),U.set(a.GainBlue)}).always(qb._post):qb._post()},_show3DNoise:function(b){b?(a("#camera_3DshowEstimate").show(),a("#camera_3Dintension").hide()):(a("#camera_3DshowEstimate").hide(),a("#camera_3Dintension").hide())},_changeTempTime:function(){0==D?(j[0][0].TimeSection="1 00:00:00-24:00:00",j[0][1].TimeSection="0 00:00:00-24:00:00",j[0][2].TimeSection="0 00:00:00-24:00:00",l[0].SwitchMode=3,g[0].NightOptions.Profile=0):1==D?(j[0][0].TimeSection="0 00:00:00-24:00:00",j[0][1].TimeSection="1 00:00:00-24:00:00",j[0][2].TimeSection="0 00:00:00-24:00:00",l[0].SwitchMode=5,g[0].NightOptions.Profile=1):(j[0][0].TimeSection="0 00:00:00-24:00:00",j[0][1].TimeSection="0 00:00:00-24:00:00",j[0][2].TimeSection="1 00:00:00-24:00:00",l[0].SwitchMode=0,g[0].NightOptions.Profile=2),b.ConfigManager.setTemporaryConfig("VideoColor",j).fail(qb._postresult)},_setTimeBack:function(){g[0].NightOptions.SwitchMode=$unlink(h[0].NightOptions.SwitchMode),g[0].NightOptions.SunriseHour=$unlink(h[0].NightOptions.SunriseHour),g[0].NightOptions.SunriseMinute=$unlink(h[0].NightOptions.SunriseMinute),g[0].NightOptions.SunriseSecond=$unlink(h[0].NightOptions.SunriseSecond),g[0].NightOptions.SunsetHour=$unlink(h[0].NightOptions.SunsetHour),g[0].NightOptions.SunsetMinute=$unlink(h[0].NightOptions.SunsetMinute),g[0].NightOptions.SunsetSecond=$unlink(h[0].NightOptions.SunsetSecond),l[0].SwitchMode=$unlink(m[0].SwitchMode),l[0].DayOptions.BeginHour=$unlink(m[0].DayOptions.BeginHour),l[0].DayOptions.BeginMinute=$unlink(m[0].DayOptions.BeginMinute),l[0].DayOptions.BeginSecond=$unlink(m[0].DayOptions.BeginSecond),l[0].DayOptions.EndHour=$unlink(m[0].DayOptions.EndHour),l[0].DayOptions.EndMinute=$unlink(m[0].DayOptions.EndMinute),l[0].DayOptions.EndSecond=$unlink(m[0].DayOptions.EndSecond),l[0].NightOptions.BeginHour=$unlink(m[0].NightOptions.BeginHour),l[0].NightOptions.BeginMinute=$unlink(m[0].NightOptions.BeginMinute),l[0].NightOptions.BeginSecond=$unlink(m[0].NightOptions.BeginSecond),l[0].NightOptions.EndHour=$unlink(m[0].NightOptions.EndHour),l[0].NightOptions.EndMinute=$unlink(m[0].NightOptions.EndMinute),l[0].NightOptions.EndSecond=$unlink(m[0].NightOptions.EndSecond),j[0][0].TimeSection=$unlink(k[0][0].TimeSection),j[0][1].TimeSection=$unlink(k[0][1].TimeSection),j[0][2].TimeSection=$unlink(k[0][2].TimeSection)},_onDefaultClick:function(){b.ConfigManager.getDefault(["VideoInOptions","VideoColor","VideoInPreviewOptions","VideoInDefog"]).done(function(a){common.chkMutilCallRet(a,!0)?(g=a[0].params.table,j=a[1].params.table,l=a[2].params.table,a[3].result&&(n=a[3].params.table),qb._setTimeBack(),qb._getCurrentPage(),remarkDisplay("camera_remark",tl("Defaultsuccess"),3e3,0)):remarkDisplay("camera_remark",tl("Defaultfailure"),3e3,1)}).always(function(){qb._drawBackline(!1),a("#camera_btn_backlight").hide()})},_onRefreshClick:function(){g=$unlink(h),j=$unlink(k),l=$unlink(m),n&&(n=$unlink(o)),qb._getCurrentPage(),(1!=a("#camera_backlight").val()||a("#camera_btn_backlight").is(":hidden"))&&qb._drawBackline(!1),remarkDisplay("camera_remark",tl("Operateingsuccess"),3e3,0)},_onConfirmClick:function(){qb._setTimeBack(),g[0].NightOptions.Profile=3;var a=["VideoInOptions","VideoColor","VideoInPreviewOptions"],c=[g,j,l];n&&(a.push("VideoInDefog"),c.push(n)),b.ConfigManager.setConfig(a,c).done(function(a){common.chkMutilCallRet(a)?(h=$unlink(g),k=$unlink(j),m=$unlink(l),n&&(o=$unlink(n)),remarkDisplay("camera_remark",tl("Succeed in saving configure"),3e3,0)):remarkDisplay("camera_remark",tl("Saving failure"),3e3,1),qb._getCurrentPage()})},_displayDayNight:function(){1==a("#camera_DayNightColor").val()?(a("#camera_showSensitivity").show(),a("#camera_showDelay").show()):(a("#camera_showSensitivity").hide(),a("#camera_showDelay").hide()),isEnable("is_show_ICR")||(a("#camera_showSensitivity").hide(),a("#camera_showDelay").hide())},_changeVideoInDefogMode:function(){"Manul"==a("#camera_VideoInDefogMode").val()?(a("#camera_LightIntensityMode").val("Auto"),a("#camera_VideoInDefogModeStrong").val(0),a("#camera_ShowVideoInDefogModeWrap").show(),a("#camera_showLightIntensityMode").show()):(a("#camera_ShowVideoInDefogModeWrap").hide(),a("#camera_showLightIntensityMode").hide(),a("#camera_ShowLightIntensityModeStrongWrap").hide())},bind:function(){a("#camera_refresh").on("click",qb._onRefreshClick),a("#camera_default").on("click",qb._onDefaultClick),a("#camera_confirm").on("click",qb._onConfirmClick),a("#camera_config_mode").on("change",function(){qb._changeDayNighr(this.value)}),a("#camera_backlight").on("change",function(){qb._onSelectBackMode(),fb=this.value}),a("#camera_backlightDefault").on("click",function(){a("#camera_backlightCustom")[0].customChecked=!1,qb._onSelectBackMode()}),a("#camera_backlightCustom").on("click",function(){1!=this.customChecked&&(qb._onSelectBackMode(),this.customChecked=this.checked)}),a("#camera_btn_backlight").on("click",qb._clearAndDrawArea),a("#camera_ExposureSpeed").on("change",qb._chaManulExposure),a("#camera_AntiFlicker_50").on("click",qb._checkAntiflicker),a("#camera_AntiFlicker_60").on("click",qb._checkAntiflicker),a("#camera_AntiFlicker_70").on("click",qb._checkAntiflicker),a("#camera_ExposureMode").on("change",qb._onSelectEmpMode),a("#camera_whiteBalance").on("change",qb._cfgScrene),a("#camera_DayNightColor").on("change",function(){qb._displayDayNight(),qb._post()}),a("#camera_GainMin").on("blur",function(){qb._checkGain("camera_GainMin",0,100)}),a("#camera_GainMax").on("blur",function(){qb._checkGain("camera_GainMax",0,100)}),a("#camera_GainMin").on("keyup",function(){/[^\d]/g.test(a("#camera_GainMin").val())&&a("#camera_GainMin").val(a("#camera_GainMin").val().replace(/[^\d]/g,"")-0)}),a("#camera_GainMax").on("keyup",function(){/[^\d]/g.test(a("#camera_GainMax").val())&&a("#camera_GainMax").val(a("#camera_GainMax").val().replace(/[^\d]/g,"")-0)}),a("#camera_autoIris_enable").on("click",qb._post),a("#camera_autoIris_disable").on("click",qb._post),a("#camera_Sensitivity").on("change",qb._post),a("#camera_btn_FullScene").on("click",function(){d.SetFullScreen()}),a("#camera_Mirror_enable").on("click",function(){"camera-draw-icon-on"==a("#camera_btn_backlight")[0].className&&a("#camera_btn_backlight").is(":visible")&&qb._changeMirror(),qb._post()}),a("#camera_Mirror_disable").on("click",function(){"camera-draw-icon-on"==a("#camera_btn_backlight")[0].className&&a("#camera_btn_backlight").is(":visible")&&qb._changeMirror(),qb._post()}),a("#camera_3DRDeNoiseOn").on("click",function(){a("#camera_3DshowEstimate").is(":visible")||(kb=50,hb.set(kb),qb._show3DNoise(1),qb._post())}),a("#camera_3DRDeNoiseOff").on("click",function(){kb=0,qb._show3DNoise(0),qb._post()}),a("#camera_VideoInDefogMode").on("change",function(){qb._changeVideoInDefogMode(),qb._post()}),a("#camera_VideoInDefogModeStrong").on("change",function(){qb._post()}),a("#camera_LightIntensityMode").on("change",function(){"Manul"==this.value?(a("#camera_ShowLightIntensityModeStrongWrap").show(),a("#camera_LightIntensityModeStrong").val(7)):a("#camera_ShowLightIntensityModeStrongWrap").hide(),qb._post()}),a("#camera_LightIntensityModeStrong").on("change",function(){qb._post()}),a("#camera_DayNightDelay").on("change",qb._post),a("#camera_SmartIR_enable").on("click",qb._post),a("#camera_SmartIR_disable").on("click",qb._post),a("#camera_VideoStabilization_enable").on("click",qb._post),a("#camera_VideoStabilization_disable").on("click",qb._post)}}}(),function(){var c=null,d=null,e=null,f=null,g=null,h=null,i=Page.cameraConfig.Tab.config={init:function(){i.translate(),i.bind(),a("#camera_timeDrag").timeDrag()},translate:function(){},render:function(){(function(){b.ConfigManager.getConfig(["VideoInOptions","VideoColor","VideoInPreviewOptions"]).done(function(b){null!=a("#CAMERA")[0]&&common.chkMutilCallRet(b)&&(c=b[0].params.table,e=b[1].params.table,g=b[2].params.table,d=$unlink(c),f=$unlink(e),h=$unlink(g),i._putValue())})}).delay(100)},_putValue:function(){var b=c[0];switch(b.NightOptions.SwitchMode){case 0:a("#camera_radio_fullTime").prop("checked",!0),a("#camera_useMode").val(0);break;case 3:a("#camera_radio_fullTime").prop("checked",!0),a("#camera_useMode").val(1);break;case 2:a("#camera_radio_exittime").prop("checked",!0),a("#camera_useMode").val(0);break;case 4:a("#camera_radio_normal").prop("checked",!0),a("#camera_useMode").val(0)
}i._getTimeMode(),a("#camera_timeDrag").timeDrag("startTime",jQuery.pad(b.NightOptions.SunriseHour,2)+":"+jQuery.pad(b.NightOptions.SunriseMinute,2)+":"+jQuery.pad(b.NightOptions.SunriseSecond,2)),a("#camera_timeDrag").timeDrag("endTime",jQuery.pad(b.NightOptions.SunsetHour,2)+":"+jQuery.pad(b.NightOptions.SunsetMinute,2)+":"+jQuery.pad(b.NightOptions.SunsetSecond,2))},_onDefaultClick:function(){b.ConfigManager.getDefault(["VideoInOptions","VideoColor","VideoInPreviewOptions"]).done(function(b){if(null!=a("#CAMERA")[0])if(common.chkMutilCallRet(b)){var d=b[0].params.table,f=b[1].params.table,h=b[2].params.table;c[0].NightOptions.SwitchMode=$unlink(d[0].NightOptions.SwitchMode),c[0].NightOptions.SunriseHour=$unlink(d[0].NightOptions.SunriseHour),c[0].NightOptions.SunriseMinute=$unlink(d[0].NightOptions.SunriseMinute),c[0].NightOptions.SunriseSecond=$unlink(d[0].NightOptions.SunriseSecond),c[0].NightOptions.SunsetHour=$unlink(d[0].NightOptions.SunsetHour),c[0].NightOptions.SunsetMinute=$unlink(d[0].NightOptions.SunsetMinute),c[0].NightOptions.SunsetSecond=$unlink(d[0].NightOptions.SunsetSecond),g[0].SwitchMode=$unlink(h[0].SwitchMode),g[0].DayOptions.BeginHour=$unlink(h[0].DayOptions.BeginHour),g[0].DayOptions.BeginMinute=$unlink(h[0].DayOptions.BeginMinute),g[0].DayOptions.BeginSecond=$unlink(h[0].DayOptions.BeginSecond),g[0].DayOptions.EndHour=$unlink(h[0].DayOptions.EndHour),g[0].DayOptions.EndMinute=$unlink(h[0].DayOptions.EndMinute),g[0].DayOptions.EndSecond=$unlink(h[0].DayOptions.EndSecond),g[0].NightOptions.BeginHour=$unlink(h[0].NightOptions.BeginHour),g[0].NightOptions.BeginMinute=$unlink(h[0].NightOptions.BeginMinute),g[0].NightOptions.BeginSecond=$unlink(h[0].NightOptions.BeginSecond),g[0].NightOptions.EndHour=$unlink(h[0].NightOptions.EndHour),g[0].NightOptions.EndMinute=$unlink(h[0].NightOptions.EndMinute),g[0].NightOptions.EndSecond=$unlink(h[0].NightOptions.EndSecond),e[0][0].TimeSection=$unlink(f[0][0].TimeSection),e[0][1].TimeSection=$unlink(f[0][1].TimeSection),e[0][2].TimeSection=$unlink(f[0][2].TimeSection),i._putValue(),remarkDisplay("camera_remark1",tl("Defaultsuccess"),3e3,0)}else remarkDisplay("camera_remark1",tl("Defaultfailure"),3e3,1)})},_onRefreshClick:function(){b.ConfigManager.getConfig(["VideoInOptions","VideoColor","VideoInPreviewOptions"]).done(function(b){null!=a("#CAMERA")[0]&&(common.chkMutilCallRet(b)?(c=b[0].params.table,e=b[1].params.table,g=b[2].params.table,i._putValue(),remarkDisplay("camera_remark1",tl("Operateingsuccess"),3e3,0)):remarkDisplay("camera_remark1",tl("Operateingfailure"),3e3,1))})},_onConfirmClick:function(){if(a("#camera_radio_exittime").prop("checked")){var d=a("#camera_timeDrag").timeDrag("startTime"),f=a("#camera_timeDrag").timeDrag("endTime");if(d===f)return remarkDisplay("camera_remark1",tl("SunTimeError"),3e3,2)}i._setColorEEMode(),b.ConfigManager.setConfig(["VideoInOptions","VideoColor","VideoInPreviewOptions"],[c,e,g]).done(function(a){common.chkMutilCallRet(a)?(remarkDisplay("camera_remark1",tl("Succeed in saving configure"),3e3,0),i._putValue()):remarkDisplay("camera_remark1",tl("Saving failure"),3e3,1)})},_getTimeMode:function(){a("#camera_radio_exittime").prop("checked")?(a("#camera_showPeriod").show(),a("#camera_showFullTime").hide()):a("#camera_radio_fullTime").prop("checked")?(a("#camera_showPeriod").hide(),a("#camera_showFullTime").show()):(a("#camera_showPeriod").hide(),a("#camera_showFullTime").hide())},_setColorEEMode:function(){var b=e[0][0],d=e[0][1],f=g[0].DayOptions,h=g[0].NightOptions,i=g[0],j=c[0],k=e[0][2];if(j.NightOptions.Profile=3,a("#camera_radio_fullTime").prop("checked"))0==a("#camera_useMode").val()?(b.TimeSection="1 00:00:00-24:00:00",d.TimeSection="0 00:00:00-24:00:00",k.TimeSection="0 00:00:00-24:00:00",j.NightOptions.SwitchMode=0,i.SwitchMode=3):(b.TimeSection="0 00:00:00-24:00:00",d.TimeSection="1 00:00:00-24:00:00",k.TimeSection="0 00:00:00-24:00:00",j.NightOptions.SwitchMode=3,i.SwitchMode=5);else if(a("#camera_radio_normal").prop("checked"))b.TimeSection="0 00:00:00-24:00:00",d.TimeSection="0 00:00:00-24:00:00",k.TimeSection="1 00:00:00-24:00:00",j.NightOptions.SwitchMode=4,i.SwitchMode=0;else{var l=a("#camera_timeDrag").timeDrag("startTime"),m=a("#camera_timeDrag").timeDrag("endTime"),n=l.split(":")[0]-0,o=l.split(":")[1]-0,p=0,q=m.split(":")[0]-0,r=m.split(":")[1]-0,s=0;j.NightOptions.SunsetHour=q,j.NightOptions.SunsetMinute=r,j.NightOptions.SunsetSecond=s,j.NightOptions.SunriseHour=n,j.NightOptions.SunriseMinute=o,j.NightOptions.SunriseSecond=p;var t=jQuery.pad(q,2),u=jQuery.pad(r,2),v=jQuery.pad(s,2),w=jQuery.pad(n,2),x=jQuery.pad(o,2),y=jQuery.pad(p,2),z=t+":"+u+":"+v,A=w+":"+x+":"+y;b.TimeSection="1 "+A+"-"+z,d.TimeSection="1 "+z+"-"+A,k.TimeSection="0 00:00:00-24:00:00",j.NightOptions.SwitchMode=2,i.SwitchMode=2,f.BeginHour=n,f.BeginMinute=o,f.BeginSecond=p,f.EndHour=q,f.EndMinute=r,f.EndSecond=s,h.BeginHour=q,h.BeginMinute=r,h.BeginSecond=s,h.EndHour=n,h.EndMinute=o,h.EndSecond=p}},bind:function(){a("#camera_default1").on("click",i._onDefaultClick),a("#camera_refresh1").on("click",i._onRefreshClick),a("#camera_confirm1").on("click",i._onConfirmClick),a("#camera_radio_fullTime").on("click",i._getTimeMode),a("#camera_radio_exittime").on("click",i._getTimeMode),a("#camera_radio_normal").on("click",i._getTimeMode)}}}(),function(){var b=Page.cameraConfig.Tab.autoFocus={init:function(){b.translate(),a("#c_f_zoomfocus").zoomFocus()},translate:function(){},leave:function(){a("#c_f_zoomfocus").zoomFocus("leave"),d.hide()},render:function(){d.cover("#c_f_video",function(b){d.SetRegionNum(0),d.SetModuleMode(1),d.open(),b&&a("#c_f_zoomfocus").zoomFocus("render")}),a("#c_f_zoomfocus").zoomFocus("render")}}}()})}(jQuery);